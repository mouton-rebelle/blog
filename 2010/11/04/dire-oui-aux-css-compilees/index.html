
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dire oui aux CSS compilées - mouton.rebelle</title>
  <meta name="author" content="Cédric Fontaine">

  
  <meta name="description" content="J&#8217;ai longtemps hésité à franchir le pas, ne trouvant pas vraiment de solutions à mon goût ; certaines étaient trop lourdes pour mes besoins, d &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.eg0.me//2010/11/04/dire-oui-aux-css-compilees">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="mouton.rebelle" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA–29804175–1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1>
    <a href="/">mouton<strong>rebelle</strong></a>
  </h1>
  <h2>
    <a href="/"><strong>don't stop.</strong> the rock.</a>
  </h2>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.eg0.me/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Dire oui aux CSS compilées</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-04T17:46:00+01:00" pubdate data-updated="true">04/11/2010</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>J&#8217;ai longtemps hésité à franchir le pas, ne trouvant pas vraiment de solutions à mon goût ; certaines étaient trop lourdes pour mes besoins, d&#8217;autres demandaient beaucoup de configuration à chaque nouveau projet&#8230;. jusqu&#8217;au mois dernier, où j&#8217;ai découvert <a href="http://compass-style.org">Compass</a>.</p>

<!-- more -->


<p>Compass est un outil qui interprète le langage SASS, version évoluée des CSS utilisé avec Ruby notamment ; c&#8217;est une gem Ruby, donc pour
l&#8217;installer sous OSX, il suffit de taper sudo gem install Compass, et hop,
vous êtes prêt. Le site explique la configuration de base, en gros il suffit
de faire un dossier scss, où vous créerez vos styles, et dans ce dossier un
fichier config.rb qui va donner les chemins d&#8217;accès au vrai dossier css, où
Compass ira créer des fichiers CSS normaux, en compilant le où les fichiers
.scss. Une fois la configuration terminée, vous lancez la commande compass
watch /chemin/vers/mon/dossier/scss/ et vous êtes bon pour redécouvrir les
css.</p>

<p>Toute bonne feuille de style commence par un reset. Comment ça Kevin, tu sais
pas ce qu&#8217;est un reset ? Boulet&#8230; Il s&#8217;agit juste de
remettre la mise en page à zéro, pour éviter d&#8217;avoir des différences dues aux
styles par défauts des différents navigateurs. Auparavant, je reprenais le
<a href="http://meyerweb.com/eric/thoughts/2007/05/01%0A/reset-reloaded/">Css Reset Reloaded d&#8217;Eric</a>. Maintenant, je commence juste mon fichier scss par @import
&#8216;compass/reset&#8217;;</p>

<p>Le deuxième problème qu&#8217;on rencontre souvent en CSS, c&#8217;est l&#8217;absence de
variables. Pour les couleurs, notamment, devoir récupérer à chaque fois le bon
code couleur est une plaie. Plus maintenant, avec Compass :</p>

<figure class='code'><figcaption><span>Les variables dans Sass  </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sass'><span class='line'><span class="nv">$couleur_titre</span><span class="o">:</span> <span class="mh">#C2FFDD</span><span class="err">;</span>
</span><span class='line'><span class="nt">h1</span><span class="err">{</span>
</span><span class='line'>  <span class="na">color</span><span class="o">:</span><span class="nv">$couleur_titre</span><span class="err">;</span>
</span><span class='line'>  <span class="na">border-bottom</span><span class="o">:</span><span class="mi">2</span><span class="kt">px</span> <span class="no">solid</span> <span class="nf">darken</span><span class="p">(</span><span class="nv">$couleur_titre</span><span class="o">,</span><span class="mi">20</span><span class="kt">%</span><span class="p">)</span><span class="err">;</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>On peut donc très facilement définir les couleurs utilisés, et les faire
varier grace aux fonctions darken et lighten ; De la même
manière, on peut définir une variable $marge, et s&#8217;en servir ensuite, avec des
maths si l&#8217;on a envie (ex : width: 600-$marge*2 px;)</p>

<p>Autre petite joyeuseté, le nesting (qui doit se traduire par imbrication), qui
permet de taper beaucoup moins de code, et d&#8217;être plus
lisible :</p>

<figure class='code'><figcaption><span>Nesting dans Sass  </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='sass'><span class='line'><span class="nt">a</span><span class="err">{</span>
</span><span class='line'>  <span class="nt">text-decoration</span><span class="nd">:none</span><span class="o">;</span>
</span><span class='line'>  <span class="nt">color</span><span class="nd">:red</span><span class="o">;</span>
</span><span class='line'>  <span class="na">font-size</span><span class="o">:</span><span class="mi">1</span><span class="mf">.1</span><span class="kt">em</span><span class="err">;</span>
</span><span class='line'>  <span class="nt">span</span><span class="err">{</span>
</span><span class='line'>    <span class="nt">display</span><span class="nd">:none</span><span class="o">;</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'>  <span class="k">&amp;</span><span class="nd">:hover</span><span class="o">,</span><span class="k">&amp;</span><span class="nd">:visited:hover</span><span class="err">{</span>
</span><span class='line'>    <span class="nt">text-decoration</span><span class="nd">:underline</span><span class="o">;</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'>  <span class="k">&amp;</span><span class="nd">:visited</span><span class="err">{</span>
</span><span class='line'>    <span class="nt">color</span><span class="nd">:darken</span><span class="o">(</span><span class="nt">red</span><span class="o">,</span><span class="nt">30</span><span class="err">%</span><span class="o">);</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Les éléments imbriqués sont par défaut les descendants (dans l&#8217;exemple ci-
dessus, on masque les spans présents dans des balises a, ce qui reviendrait à
écrire une autre règle span a), sauf quand on précède la règle d&#8217;un &amp;, auquel
cas on précise juste la nature de l&#8217;élément (ici, on indique que les liens
visités sont plus sombre, ce qui revient à une nouvelle règle a:visited).
C&#8217;est très agréable de coder ainsi, en revanche il faut prendre garde à ne pas
abuser de cette facilité, qui peut vite conduire à ne pas bien écrire ces
feuilles de style, en ayant des doublons, des règles &#8220;trop précises&#8221; et donc
non réutilisables.</p>

<p>Compass est également livré avec un bundle CSS3, qui vous fera gagner beaucoup
de temps si vous commencez à faire joujou avec les arrondis, ombres et
dégradés&#8230; Il s&#8217;importe au début du fichier css avec un @import
&#8216;compass/css3&#8217;, et s&#8217;utilise de manière presque intuitive après quelques
heures :</p>

<figure class='code'><figcaption><span>mixins css3 dans Sass    </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sass'><span class='line'><span class="nc">.bloc</span><span class="err">{</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> border-radius</span><span class="p">(</span><span class="mi">8</span><span class="kt">px</span><span class="p">)</span><span class="err">;</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> box-shadow</span><span class="p">()</span><span class="err">;</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>En deux lignes de code, on a défini que notre bloc serait arrondi, avec une
ombre. Lorsqu&#8217;il compile ces deux lignes, Compass les convertis en reprenant
tous les attributs spécifiques à chaque navigateur (-moz-border-radius,
-webkit-border-radius, etc&#8230;). Pas de coin arrondi pour IE, mais l&#8217;ombre est
reprise avec le &#8220;filter&#8221; propriétaire. Si vous hésitez à utiliser les CSS3,
regardez cette vidéo sur le <a href="http://www.youtube.com/watch?v=_nbWikK2nHY">progressive enhancement</a> :
c&#8217;est assez inspirant.</p>

<p>Pour aller encore plus loin avec Compass, il me faut évoquer la possibilité de
créer des mixins, petites fonctions réutilisables pour habiller un élément. Le
dernier site sur lequel j&#8217;ai travaillé avait une dizaine de bloc avec un fond
dégradé, d&#8217;une couleur différente à chaque fois.</p>

<figure class='code'><figcaption><span>mixins = fonctions</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sass'><span class='line'><span class="k">@mixin</span><span class="nf"> degnews</span><span class="p">(</span><span class="nv">$basecolor</span><span class="p">)</span><span class="err">{</span>
</span><span class='line'>  <span class="na">color</span><span class="o">:</span><span class="mh">#000</span><span class="err">;</span>
</span><span class='line'>   <span class="na">background</span><span class="o">:</span><span class="nv">$basecolor</span><span class="err">;</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> linear-gradient</span><span class="p">(</span><span class="nf">color-stops</span><span class="p">(</span><span class="nf">lighten</span><span class="p">(</span><span class="nv">$basecolor</span><span class="o">,</span><span class="mi">20</span><span class="kt">%</span><span class="p">)</span><span class="o">,</span> <span class="nv">$basecolor</span> <span class="mi">50</span><span class="kt">%</span><span class="o">,</span><span class="nf">darken</span><span class="p">(</span><span class="nv">$basecolor</span><span class="o">,</span><span class="mi">10</span><span class="kt">%</span><span class="p">)</span> <span class="mi">51</span><span class="kt">%</span><span class="o">,</span> <span class="nf">darken</span><span class="p">(</span><span class="nv">$basecolor</span><span class="o">,</span><span class="mi">25</span><span class="kt">%</span><span class="p">)))</span><span class="err">;</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Une fois la fonction définie, vous pouvez la réutiliser à
l&#8217;envie :</p>

<figure class='code'><figcaption><span>utiliser un mixin</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sass'><span class='line'><span class="nc">.bloc1</span><span class="err">{</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> degnews</span><span class="p">(</span><span class="mh">#FF3300</span><span class="p">)</span><span class="err">;</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pour conclure sur les possibilités de malade offertes par ce petit bijou, il
existe un plugin, <a href="http://www.hagenburger.net/BLOG/Lemonade-CSS-Sprites-for-Sass-Compass.html">Lemonade</a>, qui permet de générer automatiquement des sprites ; vous découpez vos images sans vous poser trop de
questions, en PNG transparent, et ensuite vous appelez simplement background:
sprite-image(&#8220;sprites/arrow.png&#8221;); Lemonade se charge de créer une seule image
avec toutes les petites images qui utilisent cette fonction, et de les placer
convenablement. En pratique c&#8217;est un peu plus complexe, mais à peine, et
tellement plus simple que de le faire à la main&#8230;</p>

<p>Je ne vois pas vraiment de raison de se priver de cet outil, c&#8217;est au final
assez transparent, et le gain en productivité (et en plaisir) est plus que
conséquent. Si vous n&#8217;êtes pas encore convaincus, regardez la vidéo sur le
site de <a href="http://compass-style.org">Compass</a>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Cédric Fontaine</span></span>

      








  


<time datetime="2010-11-04T17:46:00+01:00" pubdate data-updated="true">04/11/2010</time>
      

<span class="categories">
  
    <a class='category' href='/categories/compass/'>compass</a>, <a class='category' href='/categories/css/'>css</a>, <a class='category' href='/categories/sass/'>sass</a>, <a class='category' href='/categories/webdev/'>webdev</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2010/09/26/6-mois-avec-symfony/" title="Previous Post: 6 mois avec Symfony">&laquo; 6 mois avec Symfony</a>
      
      
        <a class="basic-alignment right" href="/2011/07/11/2-semaines-avec-un-ipad/" title="next Post: 2 semaines avec un iPad">2 semaines avec un iPad &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Dans quelle étagère ?</h1>
  <p>Vous êtes ici sur le blog de Cédric Fontaine, Jojo, ou @moutonrebelle, c'est comme vous voulez. Papa geek, développeur web, photographe amateur et gamer, je devrais écrire de temps à autre sur ces quelques sujets. Ou pas.</p>
</section>
<section>
  <h1>Instagram</h1>
  <div id="instagram">chargement...
  </div>
</section><section>
  <h1>Derniers billets</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/06/14/android-vs-ios/">Android versus iOS</a>
      </li>
    
      <li class="post">
        <a href="/2012/07/25/le-libre-a-tout-prix/">Le libre à tout prix</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyleft 2013 - Cédric Fontaine -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'moutonrebelle';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.eg0.me//2010/11/04/dire-oui-aux-css-compilees/';
        var disqus_url = 'http://blog.eg0.me//2010/11/04/dire-oui-aux-css-compilees/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
